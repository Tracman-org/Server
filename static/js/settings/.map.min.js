"use strict";function checkSetterEmail(e,t){void 0===e?$(".vehicle-setter").each(function(e){checkSetterEmail($(this),$(this).attr("name").slice(15))}):($("#vehicle-setter-icon-"+t).removeClass("green fa-check red fa-times fa-exclamation").addClass("fa-spinner fa-spin").attr("title","Checking if a user has this email address"),$.get({url:"/validate?user="+e.val(),statusCode:{200:function(){$("#vehicle-setter-icon-"+t).removeClass("red fa-times fa-exclamation fa-spinner fa-spin").addClass("green fa-check").attr("title","This email is associated with an existing user"),$("#submit-btn").prop("disabled",!1).prop("title","Save your settings")},404:function(){$("#vehicle-setter-icon-"+t).removeClass("green fa-check fa-exclamation fa-spinner fa-spin").addClass("red fa-times").attr("title","No Tracman user has this email"),$("#submit-btn").prop("disabled",!0).prop("title","All vehicle setters must represent real users above")}}}).fail(function(){$("#vehicle-setter-icon-"+t).removeClass("green fa-check fa-times fa-spinner fa-spin").addClass("red fa-exclamation").attr("title","Could not check if this email is associated with a Tracman user. Are you still connected to the internet?"),$("#submit-btn").prop("disabled",!1).prop("title","Try to save your settings")}))}$(function(){let e=$("#slug-input").val();checkSetterEmail(),$("#slug-input").change(function(){$("#slug-input").val()?$("#slug-input").val()===e?($("#slug-help").hide(),$("#submit-btn").prop("disabled",!1).prop("title","Save your settings")):replaceFromEndpoint("slugify","#slug-input",function(){$.get({url:"/validate?slug="+$("#slug-input").val(),statusCode:{204:function(){$("#slug-help").hide(),$("#submit-btn").prop("disabled",!1).prop("title","Save your settings")},409:function(){$("#slug-help").show().text("That URL is already in use by another map."),$("#submit-btn").prop("disabled",!0).prop("title","Supply a different URL above")}}}).fail(function(){$("#email-help").show().text("Unable to confirm unique URL.  Are you still connected to the internet?"),$("#submit-btn").prop("disabled",!1).prop("title","Try to save your settings")})}):($("#slug-help").show().text("A URL is required. "),$("#submit-btn").prop("disabled",!0).prop("title","You need to enter a URL above"))}),$(".vehicle-setter").change(function(){let e=$(this).attr("name").slice(15);$(this).val()?validateEmail($(this).val())?checkSetterEmail($(this),e):($("#vehicle-setter-icon-"+e).removeClass("green fa-check fa-exclamation fa-spinner fa-spin").addClass("red fa-times").attr("title","That isn't a valid email address"),$("#submit-btn").prop("disabled",!0).prop("title","All vehicle setters must have valid email addresses")):($("#vehicle-setter-icon-"+e).removeClass("green fa-check fa-exclamation fa-spinner fa-spin").addClass("red fa-times").attr("title","An email is required!"),$("#submit-btn").prop("disabled",!0).prop("title","You need to enter an email address for each vehicle setter"))}),$(".vehicle-delete").click(function(){const e=$(this);$("#vehicles-help").hide(),$(this).closest("tr").css({filter:"alpha(opacity=50)","-moz-opacity":"0.5","-khtml-opacity":"0.5",opacity:"0.5"}),e.addClass("fa-spinner fa-spin").css("color","#FFF").removeClass("red fa-times-circle").css("cursor","not-allowed"),$.ajax({type:"DELETE",url:window.location.pathname+"/vehicles/"+$(this).attr("id").slice(15),statusCode:{200:function(t){e.closest("tr").remove()}}}).fail(function(){$("#vehicles-help").show().text("Failed to delete that vehicle.  Are you still conected to the internet?  "),e.closest("tr").css({filter:"","-moz-opacity":"","-khtml-opacity":"",opacity:""}),e.addClass("red fa-times-circle").removeClass("fa-spinner fa-spin").css("cursor","pointer")})})});