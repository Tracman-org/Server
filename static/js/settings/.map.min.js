"use strict";function checkSetterEmail(e){if(void 0===e)$(".vehicle-setter").each(function(e){checkSetterEmail($(this))});else{let t=e.attr("name").slice(15);$("#vehicle-setter-icon-"+t).removeClass("green fa-check red fa-times fa-exclamation").addClass("fa-spinner fa-spin").attr("title","Checking if a user has this email address"),$.get({url:"/validate?user="+e.val(),statusCode:{200:function(){$("#vehicle-setter-icon-"+t).removeClass("red fa-times fa-exclamation fa-spinner fa-spin").addClass("green fa-check").attr("title","This email is associated with an existing user"),$("#submit-btn").prop("disabled",!1).prop("title","Save your settings")},400:function(){$("#vehicle-setter-icon-"+t).removeClass("green fa-check fa-exclamation fa-spinner fa-spin").addClass("red fa-times").attr("title","No Tracman user has this email"),$("#submit-btn").prop("disabled",!0).prop("title","All vehicle setters must represent real users above")}}}).fail(function(){$("#vehicle-setter-icon-"+t).removeClass("green fa-check fa-times fa-spinner fa-spin").addClass("red fa-exclamation").attr("title","Could not check if this email is associated with a Tracman user. Are you still connected to the internet?"),$("#submit-btn").prop("disabled",!1).prop("title","Try to save your settings")})}}$(function(){let e=$("#slug-input").val();checkSetterEmail(),$("#slug-input").change(function(){$("#slug-input").val()?$("#slug-input").val()===e?($("#slug-help").hide(),$("#submit-btn").prop("disabled",!1).prop("title","Save your settings")):replaceFromEndpoint("slugify","#slug-input",function(){$.get({url:"/validate?slug="+$("#slug-input").val(),statusCode:{200:function(){$("#slug-help").hide(),$("#submit-btn").prop("disabled",!1).prop("title","Save your settings")},400:function(){$("#slug-help").show().text("That URL is already in use by another map."),$("#submit-btn").prop("disabled",!0).prop("title","Supply a different URL above")}}}).fail(function(){$("#email-help").show().text("Unable to confirm unique URL.  Are you still connected to the internet?"),$("#submit-btn").prop("disabled",!1).prop("title","Try to save your settings")})}):($("#slug-help").show().text("A URL is required. "),$("#submit-btn").prop("disabled",!0).prop("title","You need to enter a URL above"))}),$(".vehicle-setter").change(function(){let e=$(this).attr("name").slice(15);$("#vehicle-setter-checking-"+e).show(),$(this).val()?validateEmail($(this).val())?checkSetterEmail($(this)):($("#vehicle-setter-icon-"+e).removeClass("green fa-check fa-exclamation fa-spinner fa-spin").addClass("red fa-times").attr("title","That isn't a valid email address"),$("#submit-btn").prop("disabled",!0).prop("title","All vehicle setters must have valid email addresses")):($("#vehicle-setter-icon-"+e).removeClass("green fa-check fa-exclamation fa-spinner fa-spin").addClass("red fa-times").attr("title","An email is required!"),$("#submit-btn").prop("disabled",!0).prop("title","You need to enter an email address for each vehicle setter"))})});